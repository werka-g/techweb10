import{createClient as u}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";import{format as d}from"https://cdn.skypack.dev/date-fns";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();const a=u("https://cbouspjmailotmgxqlpt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNib3VzcGptYWlsb3RtZ3hxbHB0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNTM5MjcsImV4cCI6MjA2MzkyOTkyN30.5a4Hv2iHxW-LvW91WffHyowJIezrVqv5g5mqBzs13r4");let l="created_at.desc";async function c(){const{data:s,error:t}=await a.from("article").select("*").order(...l.split("."));if(t){console.error(t);return}const n=document.getElementById("article-list");n.innerHTML="",s.forEach(r=>{const e=document.createElement("div");e.innerHTML=`
      <h3>${r.title}</h3>
      <h4>${r.subtitle}</h4>
      <p><strong>${r.author}</strong> | ${d(new Date(r.created_at),"dd-MM-yyyy")}</p>
      <p>${r.content}</p>
      <hr />
    `,n.appendChild(e)})}c();document.getElementById("sort-select").addEventListener("change",s=>{l=s.target.value,c()});document.getElementById("article-form").addEventListener("submit",async s=>{s.preventDefault();const t=s.target,n={title:t.title.value,subtitle:t.subtitle.value,author:t.author.value,content:t.content.value,created_at:t.created_at.value||new Date().toISOString()},{error:r}=await a.from("article").insert([n]);r?(alert("Błąd!"),console.error("Błąd Supabase:",r.message,r.details)):(alert("Dodano!"),t.reset(),c())});
